<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Currency Converter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            display: flex;
            gap: 40px;
        }
        .converter-form {
            flex: 1;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .history-section {
            flex: 1;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .error {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .history-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .clear-history {
            background-color: #f44336;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Currency Converter</h1>
    
    <div class="container">
        <div class="converter-form">
            <h2>New Conversion</h2>
            <form th:action="@{/api/v1/convert}" th:object="${conversion}" method="post">
                <div class="form-group">
                    <label for="amount">Amount:</label>
                    <input type="number" id="amount" th:field="*{amount}" step="0.01" min="0.01" required/>
                    <div class="error" th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}"></div>
                </div>

                <div class="form-group">
                    <label for="fromCurrency">From Currency:</label>
                    <select id="fromCurrency" th:field="*{fromCurrency}" required>
                        <option value="" disabled selected>Select Currency</option>
                        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="GBP">GBP</option>
        <option value="AED">AED</option>
        <option value="AFN">AFN</option>
        <option value="ALL">ALL</option>
        <option value="AMD">AMD</option>
        <option value="ANG">ANG</option>
        <option value="AOA">AOA</option>
        <option value="ARS">ARS</option>
        <option value="AUD">AUD</option>
        <option value="AWG">AWG</option>
        <option value="AZN">AZN</option>
        <option value="BAM">BAM</option>
        <option value="BBD">BBD</option>
        <option value="BDT">BDT</option>
        <option value="BGN">BGN</option>
        <option value="BHD">BHD</option>
        <option value="BIF">BIF</option>
        <option value="BMD">BMD</option>
        <option value="BND">BND</option>
        <option value="BOB">BOB</option>
        <option value="BRL">BRL</option>
        <option value="BSD">BSD</option>
        <option value="BTN">BTN</option>

        <option value="CAD">CAD</option>
        <option value="CDF">CDF</option>
        <option value="CHF">CHF</option>
        <option value="CLP">CLP</option>
        <option value="DJF">DJF</option>
        <option value="DKK">DKK</option>
        <option value="DOP">DOP</option>
        <option value="EGP">EGP</option>
        <option value="ERN">ERN</option>
        <option value="ETP">ETP</option>
        <option value="FJD">FJD</option>
        <option value="FKP">FKP</option>
        <option value="FOK">FOK</option>
        <option value="GEL">GEL</option>
        <option value="GGP">GGP</option>
        <option value="HRK">HRK</option>
        <option value="HTG">HTG</option>

        <option value="HUF">HUF</option>
        <option value="IDR">IDR</option>
        <option value="INR">INR</option>
        <option value="ILS">ILS</option>
        <option value="JEP">JEP</option>
        <option value="JMD">JMD</option>
        <option value="KES">KES</option>
        <option value="KGS">KJS</option>
        <option value="KID">KID</option>
        <option value="LAK">LAK</option>
        <option value="LBP">LBP</option>
        <option value="MAD">MAD</option>
        <option value="MDL">MDL</option>
        <option value="NAD">NAD</option>
        <option value="NGN">NGN</option>
        <option value="OMR">OMR</option>
        <option value="PEN">PEN</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="toCurrency">To Currency:</label>
                    <select id="toCurrency" th:field="*{toCurrency}" required>
                        <option value="" disabled selected>Select Currency</option>
                        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="GBP">GBP</option>
        <option value="AED">AED</option>
        <option value="AFN">AFN</option>
        <option value="ALL">ALL</option>
        <option value="AMD">AMD</option>
        <option value="ANG">ANG</option>
        <option value="AOA">AOA</option>
        <option value="ARS">ARS</option>
        <option value="AUD">AUD</option>
        <option value="AWG">AWG</option>
        <option value="AZN">AZN</option>
        <option value="BAM">BAM</option>
        <option value="BBD">BBD</option>
        <option value="BDT">BDT</option>
        <option value="BGN">BGN</option>
        <option value="BHD">BHD</option>
        <option value="BIF">BIF</option>
        <option value="BMD">BMD</option>
        <option value="BND">BND</option>
        <option value="BOB">BOB</option>
        <option value="BRL">BRL</option>
        <option value="BSD">BSD</option>
        <option value="BTN">BTN</option>

        <option value="CAD">CAD</option>
        <option value="CDF">CDF</option>
        <option value="CHF">CHF</option>
        <option value="CLP">CLP</option>
        <option value="DJF">DJF</option>
        <option value="DKK">DKK</option>
        <option value="DOP">DOP</option>
        <option value="EGP">EGP</option>
        <option value="ERN">ERN</option>
        <option value="ETP">ETP</option>
        <option value="FJD">FJD</option>
        <option value="FKP">FKP</option>
        <option value="FOK">FOK</option>
        <option value="GEL">GEL</option>
        <option value="GGP">GGP</option>
        <option value="HRK">HRK</option>
        <option value="HTG">HTG</option>

        <option value="HUF">HUF</option>
        <option value="IDR">IDR</option>
        <option value="INR">INR</option>
        <option value="ILS">ILS</option>
        <option value="JEP">JEP</option>
        <option value="JMD">JMD</option>
        <option value="KES">KES</option>
        <option value="KGS">KJS</option>
        <option value="KID">KID</option>
        <option value="LAK">LAK</option>
        <option value="LBP">LBP</option>
        <option value="MAD">MAD</option>
        <option value="MDL">MDL</option>
        <option value="NAD">NAD</option>
        <option value="NGN">NGN</option>
        <option value="OMR">OMR</option>
        <option value="PEN">PEN</option>
                    </select>
                    <div class="error" th:if="${#fields.hasErrors('toCurrency')}" th:errors="*{toCurrency}"></div>
                </div>

                <button type="submit">Convert</button>
            </form>
        </div>

        <div class="history-section">
            <h2>Recent Conversions</h2>
            <div th:if="${#lists.isEmpty(recentConversions)}">
                <p>No recent conversions</p>
            </div>
            <div th:if="${not #lists.isEmpty(recentConversions)}" class="history-list">
                <div th:each="conv : ${recentConversions}" class="history-item">
                    <p class="conversion-amount">
                        <span th:text="${#numbers.formatDecimal(conv.amount, 1, 2)}"></span>
                        <span th:text="${conv.fromCurrency}"></span> â†’
                        <span th:text="${#numbers.formatDecimal(conv.result, 1, 2)}"></span>
                        <span th:text="${conv.toCurrency}"></span>
                    </p>
                    <p class="conversion-rate">
                        Rate: <span th:text="${#numbers.formatDecimal(conv.rate, 1, 6)}"></span>
                    </p>
                    <p class="conversion-time">
                        <small th:text="${#temporals.format(conv.timestamp, 'dd-MM-yyyy HH:mm')}"></small>
                    </p>
                </div>
                <form th:action="@{/api/v1/convert/clear-history}" method="post">
                    <button type="submit" class="clear-history">Clear History</button>
                </form>
            </div>
        </div>
</body>
</html>